<ProfileScreen>:
    name: 'profile'

    MDFloatLayout:
        md_bg_color: app.rjd_light_red

        MDCard:
            size_hint: .9, .9
            pos_hint: {"center_x": .5, "top": .95}
            elevation: 8
            padding: [20, 15, 20, 15]
            spacing: 15
            orientation: "vertical"
            md_bg_color: app.rjd_white
            radius: [12]

            MDTopAppBar:
                id: menu_button
                title: root.screen_title
                left_action_items: [["logout", lambda *args: root.logout()]]
                elevation: 2
                md_bg_color: app.rjd_dark_red
                specific_text_color: app.rjd_white
                font_style: "H6"
                pos_hint: {"top": 1}
                size_hint_y: None
                height: dp(56)

            ScrollView:
                bar_width: dp(4)
                bar_color: app.rjd_dark_red

                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                    padding: [0, 10, 0, 20]
                    spacing: 20

                    MDLabel:
                        text: "Основная информация"
                        font_style: "H6"
                        halign: "center"
                        size_hint_y: None
                        height: self.texture_size[1]
                        theme_text_color: "Custom"
                        text_color: app.rjd_dark_red

                    MDTextField:
                        id: username_input
                        hint_text: "Логин"
                        text: root.username
                        readonly: True
                        mode: "rectangle"
                        size_hint_x: 0.8
                        pos_hint: {"center_x": 0.5}

                    MDTextField:
                        id: full_name_input
                        hint_text: "ФИО"
                        text: root.full_name if not root.edit_mode else ""
                        readonly: not root.edit_mode
                        mode: "rectangle"
                        size_hint_x: 0.8
                        pos_hint: {"center_x": 0.5}
                        required: True

                    MDTextField:
                        id: email_input
                        hint_text: "Email"
                        text: root.email if not root.edit_mode else ""
                        readonly: not root.edit_mode
                        mode: "rectangle"
                        size_hint_x: 0.8
                        pos_hint: {"center_x": 0.5}

                    MDTextField:
                        id: role_input
                        hint_text: "Роль"
                        text: root.role
                        readonly: True
                        mode: "rectangle"
                        size_hint_x: 0.8
                        pos_hint: {"center_x": 0.5}

                    Widget:
                        size_hint_y: None
                        height: dp(20)

                    MDRaisedButton:
                        text: "СОХРАНИТЬ ИЗМЕНЕНИЯ"
                        size_hint_x: 0.6
                        pos_hint: {"center_x": 0.5}
                        md_bg_color: app.rjd_dark_red
                        font_style: "Button"
                        on_release: root.save_profile()
                        disabled: not root.edit_mode
                        opacity: 1 if root.edit_mode else 0

            MDSnackbar:
                id: snackbar
                text: ""
                pos_hint: {"center_x": 0.5}
                size_hint_x: 0.8
                md_bg_color: app.rjd_dark_red