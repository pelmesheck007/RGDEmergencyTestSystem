<MainScreen>:
    name: 'main'

    MDFloatLayout:
        md_bg_color: app.rjd_light_red

        # Главная карточка с уменьшенными отступами
        MDCard:
            size_hint: .9, .88  # Увеличена высота для лучшего заполнения
            pos_hint: {"center_x": .5, "top": .95}  # Поднято к верху
            elevation: 8
            padding: [20, 15, 20, 15]  # Оптимизированные отступы
            spacing: 12
            orientation: "vertical"
            md_bg_color: app.rjd_white
            radius: [12]

            # Панель меню в самом верху
            MDTopAppBar:
                id: menu_button
                title: root.screen_title
                right_action_items: [["menu", lambda x: root.open_menu()]]
                left_action_items: [["logout", lambda x: root.logout()]]
                elevation: 2
                md_bg_color: app.rjd_dark_red
                specific_text_color: app.rjd_white
                font_style: "H6"
                pos_hint: {"top": 1}  # Фиксируем вверху карточки
                size_hint_y: None
                height: dp(56)

            # Прокручиваемая область для контента
            ScrollView:
                size_hint: 1, 1
                pos_hint: {"top": 0.95}
                bar_width: dp(4)
                bar_color: app.rjd_dark_red

                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                    padding: [0, 10, 0, 20]
                    spacing: 15

                    MDSpinner:
                        id: loading_spinner
                        size_hint: None, None
                        size: dp(36), dp(36)
                        pos_hint: {'center_x': 0.5}
                        active: False

                    MDLabel:
                        text: root.welcome_message
                        font_style: "H5"
                        halign: "center"
                        size_hint_y: None
                        height: self.texture_size[1]
                        padding: [0, 10, 0, 10]

                    MDLabel:
                        text: f"{root.role} {root.username}!"
                        font_style: "Body1"
                        halign: "center"
                        size_hint_y: None
                        height: self.texture_size[1]
                        theme_text_color: "Custom"
                        text_color: app.rjd_dark_red


                    Widget:
                        size_hint_y: None
                        height: dp(30)
